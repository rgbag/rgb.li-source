<!doctype html><html lang="en"><head><meta charset="utf-8"><title>rgb.li</title><meta name="description" content="RGB Light"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="manifest" href="manifest.json"><link rel="icon" href="favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/img/touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png"><style>body{font-family:sans-serif;background-color:#000;margin:0;padding:0;width:100%}.container{margin:auto;text-align:center}#colors{width:100%;display:flex;flex-wrap:wrap}.color{flex:1 0 20%;outline:0;-webkit-tap-highlight-color:transparent}.color:after{content:'';display:block;padding-bottom:100%}#fullScreenColor{position:fixed;width:100vw;height:100vh;image-rendering:pixelated}.fadeIn{opacity:0;animation:fadeIn ease-in 1;animation-fill-mode:forwards;animation-duration:.2s}@-moz-keyframes fadeIn{from{opacity:0}to{opacity:1}}@-webkit-keyframes fadeIn{from{opacity:0}to{opacity:1}}@-o-keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}body.noscript{width:100%;background-color:#fff}.noscript{--zoomAnimation:0.5s}.noscript .fadeAnimation{animation:fadeIn ease-in;animation-duration:.5s}.noscript .colorSwitch input{visibility:hidden;position:fixed;top:-100px}.noscript .noscriptColor{position:fixed;z-index:1;cursor:pointer;transition:var(--zoomAnimation)}.noscript .noscriptColor:before{position:fixed;content:"";height:25%;width:20%;transition:var(--zoomAnimation)}.noscript input:checked+.noscriptColor{z-index:300}.noscript input:checked+.noscriptColor:before{position:fixed;border-radius:100vw;height:200vh;width:200vw;top:-50vh;left:-50vw;z-index:420}.noscript .color1{animation-delay:0s}.noscript .color1:before{background-color:#00bfff;top:0;left:0}.noscript .color2{animation-delay:.1s}.noscript .color2:before{background-color:#adff2f;top:0;left:20%}.noscript .color3{animation-delay:.2s}.noscript .color3:before{background-color:#daa520;top:0;left:40%}.noscript .color4{animation-delay:.3s}.noscript .color4:before{background-color:#ff0;top:0;left:60%}.noscript .color5{animation-delay:.4s}.noscript .color5:before{background-color:#2f4f4f;top:0;left:80%}.noscript .color6{animation-delay:.5s}.noscript .color6:before{background-color:#f0f;top:25%;left:0}.noscript .color7{animation-delay:.6s}.noscript .color7:before{background-color:#0ff;top:25%;left:20%}.noscript .color8{animation-delay:.7s}.noscript .color8:before{background-color:grey;top:25%;left:40%}.noscript .color9{animation-delay:.8s}.noscript .color9:before{background-color:#0f0;top:25%;left:60%}.noscript .color10{animation-delay:.9s}.noscript .color10:before{background-color:maroon;top:25%;left:80%}.noscript .color11{animation-delay:1s}.noscript .color11:before{background-color:#6495ed;top:50%;left:0}.noscript .color12{animation-delay:1.1s}.noscript .color12:before{background-color:#7cfc00;top:50%;left:20%}.noscript .color13{animation-delay:1.2s}.noscript .color13:before{background-color:salmon;top:50%;left:40%}.noscript .color14{animation-delay:1.3s}.noscript .color14:before{background-color:#7b68ee;top:50%;left:60%}.noscript .color15{animation-delay:1.4s}.noscript .color15:before{background-color:teal;top:50%;left:80%}.noscript .color16{animation-delay:1.5s}.noscript .color16:before{background-color:#000;top:75%;left:0}.noscript .color17{animation-delay:1.6s}.noscript .color17:before{background-color:purple;top:75%;left:20%}.noscript .color18{animation-delay:1.7s}.noscript .color18:before{background-color:orchid;top:75%;left:40%}.noscript .color19{animation-delay:1.8s}.noscript .color19:before{background-color:#ff1493;top:75%;left:60%}.noscript .color20{animation-delay:1.9s}.noscript .color20:before{background-color:#fff;top:75%;left:80%}@-moz-keyframes fadeIn{from{opacity:0}to{opacity:1}}@-webkit-keyframes fadeIn{from{opacity:0}to{opacity:1}}@-o-keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}#__bs_notify__{top:auto!important;bottom:0!important;border-top-left-radius:5px!important;border-bottom-left-radius:0!important;color:#fff!important;width:100%!important;background-color:#32cd32!important;animation-name:browsersync-notification!important;animation-duration:2s!important;animation-timing-function:ease!important}@-moz-keyframes browsersync-notification{0%{opacity:0}25%{opacity:.8}60%{opacity:.8}100%{opacity:0}}@-webkit-keyframes browsersync-notification{0%{opacity:0}25%{opacity:.8}60%{opacity:.8}100%{opacity:0}}@-o-keyframes browsersync-notification{0%{opacity:0}25%{opacity:.8}60%{opacity:.8}100%{opacity:0}}@keyframes browsersync-notification{0%{opacity:0}25%{opacity:.8}60%{opacity:.8}100%{opacity:0}}</style></head><body class="noscript"><script>document.body.classList.remove("noscript")</script><div id="colors"></div><noscript><label class="colorSwitch"><input type="checkbox"><span class="noscriptColor color1 fadeAnimation"></span></label> <label class="colorSwitch"><input type="checkbox"><span class="noscriptColor color2 fadeAnimation"></span></label> <label class="colorSwitch"><input type="checkbox"><span class="noscriptColor color3 fadeAnimation"></span></label> <label class="colorSwitch"><input type="checkbox"><span class="noscriptColor color4 fadeAnimation"></span></label> <label class="colorSwitch"><input type="checkbox"><span class="noscriptColor color5 fadeAnimation"></span></label> <label class="colorSwitch"><input type="checkbox"><span class="noscriptColor color6 fadeAnimation"></span></label> <label class="colorSwitch"><input type="checkbox"><span class="noscriptColor color7 fadeAnimation"></span></label> <label class="colorSwitch"><input type="checkbox"><span class="noscriptColor color8 fadeAnimation"></span></label> <label class="colorSwitch"><input type="checkbox"><span class="noscriptColor color9 fadeAnimation"></span></label> <label class="colorSwitch"><input type="checkbox"><span class="noscriptColor color10 fadeAnimation"></span></label> <label class="colorSwitch"><input type="checkbox"><span class="noscriptColor color11 fadeAnimation"></span></label> <label class="colorSwitch"><input type="checkbox"><span class="noscriptColor color12 fadeAnimation"></span></label> <label class="colorSwitch"><input type="checkbox"><span class="noscriptColor color13 fadeAnimation"></span></label> <label class="colorSwitch"><input type="checkbox"><span class="noscriptColor color14 fadeAnimation"></span></label> <label class="colorSwitch"><input type="checkbox"><span class="noscriptColor color15 fadeAnimation"></span></label> <label class="colorSwitch"><input type="checkbox"><span class="noscriptColor color16 fadeAnimation"></span></label> <label class="colorSwitch"><input type="checkbox"><span class="noscriptColor color17 fadeAnimation"></span></label> <label class="colorSwitch"><input type="checkbox"><span class="noscriptColor color18 fadeAnimation"></span></label> <label class="colorSwitch"><input type="checkbox"><span class="noscriptColor color19 fadeAnimation"></span></label> <label class="colorSwitch"><input type="checkbox"><span class="noscriptColor color20 fadeAnimation"></span></label></noscript><script>// Generated by CoffeeScript 2.4.1
(function() {
  //#
  //region setup
  var click, createColorGrid, debugLog, disableFullScreenColor, enableFullScreenColor, getColorCodeFromUrl, home, isFullScreen, kickstart, onElementClick, onScroll, pushWindowHistoryState, randomColorCode, setup, stateSwitch, userHistory, validateHexColorCode;

  debugLog = function() {
    if (window.location.hostname === 'localhost') {
      return console.log(...arguments);
    }
  };

  setup = function() {
    debugLog('setup()');
    createColorGrid();
    window.addEventListener('scroll', onScroll);
    return window.addEventListener('popstate', function(e) {
      debugLog("window.addEventListener 'popstate'");
      return stateSwitch();
    });
  };

  kickstart = function() {
    debugLog('kickstart()');
    setup();
    return getColorCodeFromUrl();
  };

  //endregion

  //#
  //region state management
  userHistory = [];

  click = 0;

  isFullScreen = function() {
    var fullScreenState;
    debugLog('isFullScreen()');
    if (document.getElementById('fullScreenColor') === null) {
      return fullScreenState = false;
    } else {
      return fullScreenState = true;
    }
  };

  stateSwitch = function() {
    debugLog('stateSwitch()');
    // browser history state change by user
    if (isFullScreen()) {
      debugLog('if isFullScreen()');
      return home();
    } else {
      debugLog('if not isFullScreen()');
      return getColorCodeFromUrl('#');
    }
  };

  home = function() {
    debugLog('home()');
    return disableFullScreenColor('/.');
  };

  pushWindowHistoryState = function(state3) {
    debugLog('pushWindowHistoryState("' + state3 + '")');
    if (userHistory.length === 0 || click === 1) {
      debugLog('if userHistory.length == 0 || click == 1');
      click = 0;
      userHistory.push(state3);
      return window.history.pushState(state3, state3, state3);
    }
  };

  onElementClick = function(evt) {
    var color, tokens;
    debugLog('onElementClick()', evt);
    tokens = evt.target.getAttribute("href").split("#");
    color = "#" + tokens[1];
    click = 1;
    return enableFullScreenColor(color);
  };

  onScroll = function() {
    var colorsDiv, pixelToBottom;
    debugLog('onScroll()');
    colorsDiv = document.getElementById('colors');
    pixelToBottom = colorsDiv.offsetHeight - window.scrollY;
    if (pixelToBottom < window.innerHeight * 2) {
      return createColorGrid();
    }
  };

  getColorCodeFromUrl = function() {
    var query, url;
    debugLog("getColorCodeFromUrl('#')");
    url = window.location.href;
    if (url.includes('#')) {
      debugLog("if url.includes('#')");
      query = '#' + url.split('#')[1];
      return validateHexColorCode(query);
    }
  };

  //endregion

  //#
  //region color
  randomColorCode = function(colorType) {
    debugLog('randomColorCode(' + colorType + ')');
    colorType = colorType || 'hex';
    if (colorType === 'hex') {
      return '#' + (0x1000000 + (Math.random()) * 0xffffff).toString(16).substr(1, 6);
    }
  };

  createColorGrid = function() {
    var colorSquares, colors, divArray, i, randomColor, results;
    debugLog('createColorGrid()');
    i = 0;
    colorSquares = 200;
    divArray = new Array;
    colors = document.getElementById('colors');
    results = [];
    while (i < colorSquares) {
      divArray[i] = document.createElement('div');
      divArray[i].style.backgroundColor = randomColor = randomColorCode('hex');
      divArray[i].className = 'color';
      divArray[i].setAttribute('href', "" + randomColor);
      divArray[i].addEventListener("click", onElementClick);
      colors.appendChild(divArray[i]);
      results.push(i++);
    }
    return results;
  };

  validateHexColorCode = function(colorCode) {
    var url;
    debugLog('validateHexColorCode(' + colorCode + ')');
    if (/^#[0-9A-F]{6}$/i.test(colorCode) || /^#([0-9A-F]{3}){1,2}$/i.test(colorCode)) {
      debugLog(colorCode + ' is a valid HEX color code.');
      return enableFullScreenColor(colorCode);
    } else {
      debugLog(colorCode + ' is not a valid HEX color code.');
      url = window.location.href;
      return window.history.replaceState(null, null, url.split('#')[0]);
    }
  };

  enableFullScreenColor = function(color) {
    var fullScreenColorDiv;
    debugLog('enableFullScreenColor(' + color + ')');
    fullScreenColorDiv = '<div id="fullScreenColor" class="fadeIn" style="background-color: ' + color + ';"><div/>';
    document.body.insertAdjacentHTML('afterbegin', fullScreenColorDiv);
    document.body.style.overflow = 'hidden';
    return pushWindowHistoryState(color);
  };

  disableFullScreenColor = function(pushState) {
    document.getElementById('fullScreenColor').remove();
    document.body.style.overflow = null;
    return window.history.replaceState(null, null, window.location.pathname);
  };

  //endregion

  //#
  //region functions for later

  // isValidColorCode = (colorCode) -> /^#[0-9A-F]{6}$/i.test(colorCode) || /^#([0-9A-F]{3}){1,2}$/i.test(colorCode)
  // generateRandomColorCode = -> '#'+(0x1000000+(Math.random())*0xffffff).toString(16).substr(1,6)
  // colorCodeFromURL = (url) ->  '#' + url.split(urlSeperator)[1]

  // createColorPng = (width, height, colorCode) ->
  //     canvas = document.createElement("CANVAS")
  //     canvas.setAttribute("width", width)
  //     canvas.setAttribute("height", height)
  //     context = canvas.getContext("2d")
  //     context.fillStyle = colorCode
  //     context.fillRect(0, 0, width, height)
  //     image = canvas.toDataURL("image/png")
  //     image = canvas.toDataURL()
  //     return image

  // enableFullScreenColorPng = (color) ->
  //     png = createColorPng(360, 360, color)
  //     pngHTML = "<img id='colorImage' src='"+png+"' style='position:fixed; width:100vw; height:100vh; image-rendering: pixelated;'>"
  //     document.body.insertAdjacentHTML('afterbegin', pngHTML)
  //     pushWindowHistoryState(color)

  //endregion
  kickstart();

  //#
  // region service worker
  window.onload = function() {
    'use strict';
    if (window.location.hostname !== 'localhost') { // because of browser-sync error
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('./sw.js').then(function(registration) {
          debugLog('Service Worker Registered', registration);
        }).catch(function(err) {
          debugLog('Service Worker Failed to Register', err);
        });
      }
    }
  };

  //endregion

}).call(this);</script></body></html>